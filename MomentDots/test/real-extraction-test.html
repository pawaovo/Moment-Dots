<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çœŸå®æ–‡ç« æŠ“å–æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .test-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .test-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .test-button:hover {
            background: #0056b3;
        }
        
        .test-result {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            margin-top: 15px;
            white-space: pre-wrap;
            font-family: monospace;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .success {
            background: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        
        .error {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
        
        .article-preview {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-top: 15px;
            overflow: hidden;
        }
        
        .article-header {
            background: #f8f9fa;
            padding: 15px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .article-title {
            margin: 0 0 10px 0;
            font-size: 18px;
            font-weight: bold;
        }
        
        .article-meta {
            font-size: 12px;
            color: #6c757d;
        }
        
        .article-content {
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="test-header">
        <h1>ğŸ¯ çœŸå®æ–‡ç« æŠ“å–æµ‹è¯•</h1>
        <p>æ¨¡æ‹ŸMomentDotsæ‰©å±•ç¨‹åºåœ¨å³åˆ»æ–‡ç« é¡µé¢çš„æŠ“å–è¿‡ç¨‹</p>
    </div>

    <div class="test-container">
        <h2>ğŸ“„ å³åˆ»æ–‡ç« æŠ“å–æ¨¡æ‹Ÿ</h2>
        <p><strong>æµ‹è¯•URL:</strong> https://m.okjike.com/originalPosts/68bb80d614af706d82e43d01</p>
        <p><strong>æ–‡ç« æ ‡é¢˜:</strong> ä¸‰ä¸ªæŠ€å·§ï¼Œè®©ä½ çš„äº§å“åœ¨ Reddit ä¸Šç‹‚åˆ·å­˜åœ¨æ„Ÿè¿˜ä¸ä¼šè¢«å°</p>
        
        <button class="test-button" onclick="simulateExtraction()">æ¨¡æ‹Ÿæ–‡ç« æŠ“å–</button>
        <button class="test-button" onclick="testReadability()">æµ‹è¯•å¯è¯»æ€§æ£€æŸ¥</button>
        <button class="test-button" onclick="testContentEnhancement()">æµ‹è¯•å†…å®¹å¢å¼º</button>
        
        <div id="extraction-result" class="test-result"></div>
    </div>

    <!-- åŠ è½½Mozilla Readabilityåº“ -->
    <script src="../libs/readability/JSDOMParser.js"></script>
    <script src="../libs/readability/Readability.js"></script>
    <script src="../libs/readability/Readability-readerable.js"></script>
    
    <script>
        // æ¨¡æ‹Ÿå³åˆ»æ–‡ç« çš„HTMLç»“æ„
        function createJikeArticleHTML() {
            return `
                <html>
                <head>
                    <title>ä¸‰ä¸ªæŠ€å·§ï¼Œè®©ä½ çš„äº§å“åœ¨ Reddit ä¸Šç‹‚åˆ·å­˜åœ¨æ„Ÿè¿˜ä¸ä¼šè¢«å° - å³åˆ»App</title>
                    <meta name="description" content="ä½ æ˜¯å¦æ›¾ç»æƒ³è¿‡åœ¨ Reddit ä¸Šæ¨å¹¿è‡ªå·±çš„äº§å“ï¼Œå´æ‹…å¿ƒå› ä¸º"è‡ªæˆ‘æ¨å¹¿"è€Œè¢«å°å·ï¼Ÿ">
                </head>
                <body>
                    <div class="header">
                        <div class="app-download">
                            <img src="logo.png" alt="å³åˆ»App">
                            <div>å³åˆ»App</div>
                            <div>å¹´è½»äººçš„åŒå¥½ç¤¾åŒº</div>
                            <div>ä¸‹è½½</div>
                        </div>
                        <a href="https://web.okjike.com/originalPost/68bb80d614af706d82e43d01">åœ¨webç‰ˆæ‰“å¼€</a>
                    </div>
                    
                    <main>
                        <article>
                            <div class="author-info">
                                <div class="author-name">Niko_</div>
                                <div class="publish-time">6å¤©å‰</div>
                            </div>
                            
                            <div class="content">
                                <h1>ä¸‰ä¸ªæŠ€å·§ï¼Œè®©ä½ çš„äº§å“åœ¨ Reddit ä¸Šç‹‚åˆ·å­˜åœ¨æ„Ÿè¿˜ä¸ä¼šè¢«å°ï¼ˆå«æ¡ˆä¾‹ï¼‰</h1>
                                
                                <p>ä½ æ˜¯å¦æ›¾ç»æƒ³è¿‡åœ¨ Reddit ä¸Šæ¨å¹¿è‡ªå·±çš„äº§å“ï¼Œå´æ‹…å¿ƒå› ä¸º"è‡ªæˆ‘æ¨å¹¿"è€Œè¢«å°å·ï¼Ÿè¿™ç¡®å®æ˜¯ä¸ªéœ€è¦è°¨æ…å¯¹å¾…çš„é—®é¢˜ã€‚</p>
                                
                                <p>é€šè¿‡æ·±å…¥åˆ†æå¤§é‡æˆåŠŸæ¡ˆä¾‹ï¼Œæˆ‘æ€»ç»“äº†ä¸‰ç§æœ€æœ‰æ•ˆä¸”å®‰å…¨çš„æ¨å¹¿æ–¹æ³•ï¼Œå¸Œæœ›èƒ½ä¸ºä½ æä¾›ä¸€äº›å‚è€ƒã€‚</p>
                                
                                <hr>
                                
                                <h2>ã€å°†äº§å“èå…¥æ•…äº‹å™è¿° ğŸ“–ã€‘</h2>
                                <p>æœ€é«˜æ˜çš„æ–¹å¼ï¼Œä¸æ˜¯ç›´æ¥å®£ä¼ äº§å“ï¼Œè€Œæ˜¯å°†å…¶è‡ªç„¶åœ°èå…¥ä½ çš„ä¸ªäººç»å†ä¸­ã€‚è¿™ç§æ–¹å¼èƒ½å¤Ÿåœ¨ä¸è§¦å‘å¹³å°è‡ªæˆ‘æ¨å¹¿è­¦æŠ¥çš„æƒ…å†µä¸‹ï¼Œè®©ç”¨æˆ·å¯¹ä½ çš„äº§å“äº§ç”Ÿå…´è¶£ã€‚</p>
                                
                                <h3>çœŸå®æ¡ˆä¾‹ï¼š</h3>
                                <ul>
                                    <li>ã€Šæˆ‘è¾èŒå…¨èº«å¿ƒåšSaaSã€‹ï¼ˆ406èµ/188è¯„ï¼‰</li>
                                    <li>ã€Šåå¹´å‰æˆ‘èäº†250ä¸‡åˆ€ï¼Œçƒ§å…‰ä¹‹åæˆ‘å­¦åˆ°äº†è¿™äº›ã€‹ï¼ˆ652èµ/109è¯„ï¼‰</li>
                                    <li>ã€Šç»ˆäºæ¥äº†â€”â€”ä»Šå¤©æ”¶è·ç¬¬ä¸€ä¸ªä»˜è´¹ç”¨æˆ·ï¼ã€‹ï¼ˆ390èµ/315è¯„ï¼‰</li>
                                </ul>
                                
                                <h3>å¯å€Ÿé‰´çš„æ•…äº‹è§’åº¦ï¼š</h3>
                                <ul>
                                    <li>äº§å“é‡è¦é‡Œç¨‹ç¢‘</li>
                                    <li>ä½¿ç”¨è‡ªå·±äº§å“è§£å†³é—®é¢˜çš„ç»å†</li>
                                    <li>å®¢æˆ·çš„æœ‰è¶£ä½¿ç”¨æ¡ˆä¾‹</li>
                                    <li>äº§å“å¼€å‘è¿‡ç¨‹ä¸­çš„ç»éªŒæ•™è®­</li>
                                </ul>
                                
                                <h3>å®ç”¨æŠ€å·§ï¼š</h3>
                                <ul>
                                    <li>âœ… ä¿æŒæ•…äº‹ä¸ºä¸»ï¼Œäº§å“ä¸ºè¾…</li>
                                    <li>âœ… ç”¨å¸å¼•äººçš„å¼€å¤´å¼•å‘å¥½å¥‡å¿ƒ</li>
                                    <li>âœ… é€‚å½“å±•ç¤ºä½ çš„ä¸“ä¸šèƒŒæ™¯</li>
                                    <li>âœ… ç”¨å…·ä½“æ•°æ®å’Œæˆªå›¾å¢åŠ å¯ä¿¡åº¦</li>
                                    <li>âœ… é€šè¿‡ä¸ªäººä¸»é¡µå’Œè¯„è®ºåŒºè¿›è¡Œè½¬åŒ–</li>
                                </ul>
                                
                                <hr>
                                
                                <h2>ã€æä¾›é«˜ä»·å€¼ä¸“ä¸šå†…å®¹ ğŸ’£ã€‘</h2>
                                <p>é€šè¿‡åˆ†äº«æ·±åº¦ä¸“ä¸šå†…å®¹ï¼Œå¦‚å¢é•¿ç­–ç•¥ã€SEOæŠ€å·§æˆ–æ¡ˆä¾‹åˆ†æï¼Œä½ å¯ä»¥å»ºç«‹ä¸“ä¸šå½¢è±¡å¹¶é—´æ¥æ¨å¹¿äº§å“ã€‚</p>
                                
                                <h3>çœŸå®æ¡ˆä¾‹ï¼š</h3>
                                <ul>
                                    <li>ã€Šæˆ‘åˆ†æäº†r/SaaS çš„1ä¸‡æ¡é«˜èµè´´ã€‹ï¼ˆ84èµ/46è¯„ï¼‰</li>
                                    <li>ã€Šç”¨è¿™ä¸ªè„šæœ¬ï¼Œæˆ‘å®Œæˆäº†200+è‡ªç”±èŒä¸šå•å­ã€‹ï¼ˆ1100èµ/177è¯„ï¼‰</li>
                                    <li>ã€Š5æœˆå‘äº†5ä¸‡å°é‚®ä»¶ï¼Œè¿™æ˜¯ç»™æ–°æ‰‹çš„å…¨éƒ¨ç»éªŒã€‹ï¼ˆ236èµ/122è¯„ï¼‰</li>
                                </ul>
                                
                                <h3>å†…å®¹åˆ›ä½œå»ºè®®ï¼š</h3>
                                <ul>
                                    <li>å¼ºè°ƒä¸“ä¸šèµ„è´¨å’Œç»éªŒ</li>
                                    <li>æä¾›å…·ä½“å¯è¡Œçš„å»ºè®®</li>
                                    <li>å†…å®¹ä¸äº§å“é¢†åŸŸç›¸å…³</li>
                                    <li>é€‰æ‹©ç»†åˆ†é¢†åŸŸè¿›è¡Œæ·±åº¦æ¢è®¨</li>
                                </ul>
                                
                                <hr>
                                
                                <h2>ã€æä¾›å…è´¹å¸®åŠ©ä¸æœåŠ¡ ğŸ†“ã€‘</h2>
                                <p>é€šè¿‡"ç•™ä¸‹ä½ çš„XXXï¼Œæˆ‘æ¥å¸®ä½ XXX"çš„å½¢å¼ï¼Œå¯ä»¥ç›´æ¥å±•ç¤ºä¸“ä¸šèƒ½åŠ›å¹¶å»ºç«‹ç”¨æˆ·å…³ç³»ã€‚</p>
                                
                                <h3>çœŸå®æ¡ˆä¾‹ï¼š</h3>
                                <ul>
                                    <li>ã€Šç•™ä¸‹ä½ çš„SaaSï¼Œæˆ‘æ¥å¸®ä½ åœ¨ChatGPTé‡Œæ’åã€‹ï¼ˆ157èµ/401è¯„ï¼‰</li>
                                    <li>ã€Šè´´å‡ºä½ çš„SaaSï¼Œæˆ‘ä»¬å…è´¹å¸®ä½ æ‰¾5ä¸ªå®¢æˆ·ã€‹ï¼ˆ148èµ/405è¯„ï¼‰</li>
                                </ul>
                                
                                <h3>æ“ä½œå»ºè®®ï¼š</h3>
                                <ul>
                                    <li>âœ… æ˜ç¡®è¯´æ˜æœåŠ¡å†…å®¹å’ŒèŒƒå›´</li>
                                    <li>âœ… è®¾ç½®åˆç†çš„æœåŠ¡é™é¢</li>
                                    <li>âœ… å¼•å¯¼ç”¨æˆ·åœ¨è¯„è®ºåŒºäº’åŠ¨</li>
                                    <li>âœ… é€šè¿‡ä¸ªäººä¸»é¡µè¿›è¡Œåç»­è½¬åŒ–</li>
                                </ul>
                                
                                <hr>
                                
                                <h2>ã€æ¨å¹¿ç­–ç•¥ä¸é£é™©ç®¡ç† ğŸ¤”ã€‘</h2>
                                
                                <h3>ä¸¥æ ¼ç‰ˆå—æ¨å¹¿æŠ€å·§ï¼š</h3>
                                <ul>
                                    <li>è‡ªç„¶èå…¥äº§å“åç§°ï¼Œé¿å…é”€å”®è¯­æ°”</li>
                                    <li>ä¼˜å…ˆåœ¨è¯„è®ºåŒºåˆ†äº«é“¾æ¥</li>
                                    <li>ç­‰å¾…ç”¨æˆ·ä¸»åŠ¨è¯¢é—®äº§å“ä¿¡æ¯</li>
                                </ul>
                                
                                <h3>è¶…ä¸¥æ ¼ç‰ˆå—åº”å¯¹ç­–ç•¥ï¼š</h3>
                                <ul>
                                    <li>æš—ç¤ºæ‰€åœ¨é¢†åŸŸå’Œè§£å†³çš„é—®é¢˜</li>
                                    <li>é€šè¿‡ä¸ªäººä¸»é¡µè¿›è¡Œå¼•æµ</li>
                                    <li>åœ¨é€‚å½“æ—¶æœºåˆ†äº«äº§å“ä¿¡æ¯</li>
                                </ul>
                                
                                <hr>
                                
                                <h2>ã€ä¸ªäººä¸»é¡µä¼˜åŒ–å»ºè®® ğŸ§‘ğŸ’»ã€‘</h2>
                                <ul>
                                    <li>ä½¿ç”¨çœŸå®å§“åå’Œå¤´åƒ</li>
                                    <li>ç¼–å†™æ¸…æ™°çš„ä¸“ä¸šç®€ä»‹</li>
                                    <li>è®¾ç½®æœ‰æ•ˆçš„å¼•æµé“¾æ¥</li>
                                    <li>å®Œå–„ç¤¾äº¤åª’ä½“è”ç³»æ–¹å¼</li>
                                </ul>
                                
                                <hr>
                                
                                <p>åœ¨ Reddit ä¸Šè¿›è¡Œæœ‰æ•ˆæ¨å¹¿çš„å…³é”®åœ¨äºï¼šä¼˜å…ˆæä¾›ä»·å€¼ï¼Œè‡ªç„¶èå…¥äº§å“ä¿¡æ¯ã€‚è¿™ç§æ–¹æ³•å¯èƒ½éœ€è¦æ›´å¤šæ—¶é—´ï¼Œä½†é•¿æœŸæ•ˆæœæ›´ä¸ºç¨³å®šå’Œå¯æŒç»­ã€‚</p>
                                
                                <p>æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ Reddit æ¨å¹¿ç»éªŒå’Œå¿ƒå¾—ï¼Œæˆ‘ä»¬ä¸€èµ·äº¤æµå­¦ä¹ ã€‚</p>
                            </div>
                            
                            <div class="interaction">
                                <div class="like">7</div>
                                <div class="comment">0</div>
                                <div class="share">11</div>
                            </div>
                        </article>
                    </main>
                    
                    <aside>
                        <div class="topic-info">
                            <h2>æ¥è‡ªåœˆå­</h2>
                            <div class="topic">
                                <img src="topic.jpg" alt="è¿è¥çš„æ—¥å¸¸">
                                <div>
                                    <h3>è¿è¥çš„æ—¥å¸¸</h3>
                                    <p>115624äººå·²ç»åŠ å…¥</p>
                                </div>
                                <button>åŠ å…¥</button>
                            </div>
                        </div>
                    </aside>
                    
                    <footer>
                        <div class="app-promotion">ä¸‹è½½å³åˆ»App</div>
                    </footer>
                </body>
                </html>
            `;
        }

        // å·¥å…·å‡½æ•°
        function logResult(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            const timestamp = new Date().toLocaleTimeString();
            const statusIcon = type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'â„¹ï¸';
            element.innerHTML += `[${timestamp}] ${statusIcon} ${message}\n`;
            element.scrollTop = element.scrollHeight;
        }

        function updateStatus(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            element.className = `test-result ${type}`;
            element.textContent = message;
        }

        // æ¨¡æ‹Ÿæ–‡ç« æŠ“å–
        function simulateExtraction() {
            updateStatus('extraction-result', 'å¼€å§‹æ¨¡æ‹Ÿå³åˆ»æ–‡ç« æŠ“å–...', 'loading');

            try {
                const htmlContent = createJikeArticleHTML();
                const parser = new DOMParser();
                const doc = parser.parseFromString(htmlContent, 'text/html');

                logResult('extraction-result', 'âœ… HTMLè§£ææˆåŠŸ', 'success');
                logResult('extraction-result', `é¡µé¢æ ‡é¢˜: ${doc.title}`, 'info');

                // æ£€æŸ¥æ˜¯å¦é€‚åˆæŠ“å–
                const isReaderable = isProbablyReaderable(doc);
                logResult('extraction-result', `å¯è¯»æ€§æ£€æŸ¥: ${isReaderable ? 'é€šè¿‡' : 'å¤±è´¥'}`, isReaderable ? 'success' : 'error');

                if (!isReaderable) {
                    logResult('extraction-result', 'é¡µé¢å†…å®¹ä¸é€‚åˆæŠ“å–', 'error');
                    return;
                }

                // æ‰§è¡ŒæŠ“å–
                const reader = new Readability(doc.cloneNode(true), {
                    charThreshold: 200,
                    classesToPreserve: ['highlight', 'code', 'emoji'],
                    keepClasses: true,
                    debug: false
                });

                const article = reader.parse();

                if (article) {
                    logResult('extraction-result', 'âœ… æ–‡ç« æŠ“å–æˆåŠŸ!', 'success');
                    logResult('extraction-result', `æ ‡é¢˜: ${article.title}`, 'success');
                    logResult('extraction-result', `ä½œè€…: ${article.byline || 'æœªæ£€æµ‹åˆ°'}`, 'info');
                    logResult('extraction-result', `å†…å®¹é•¿åº¦: ${article.length} å­—ç¬¦`, 'info');
                    logResult('extraction-result', `è¯­è¨€: ${article.lang || 'æœªæ£€æµ‹åˆ°'}`, 'info');

                    // æ˜¾ç¤ºå†…å®¹é¢„è§ˆ
                    const preview = article.textContent.substring(0, 200);
                    logResult('extraction-result', `å†…å®¹é¢„è§ˆ: ${preview}...`, 'info');

                    // æ˜¾ç¤ºå®Œæ•´çš„æ–‡ç« é¢„è§ˆ
                    displayArticlePreview(article);

                    // æ¨¡æ‹Ÿå†…å®¹å¢å¼º
                    const enhancedData = simulateContentEnhancement(article);
                    logResult('extraction-result', `âœ… å†…å®¹å¢å¼ºå®Œæˆ`, 'success');
                    logResult('extraction-result', `æ£€æµ‹åˆ°å›¾ç‰‡: ${enhancedData.images.length} å¼ `, 'info');
                    logResult('extraction-result', `æ£€æµ‹åˆ°é“¾æ¥: ${enhancedData.links.length} ä¸ª`, 'info');
                    logResult('extraction-result', `é¢„ä¼°é˜…è¯»æ—¶é—´: ${enhancedData.readingTime} åˆ†é’Ÿ`, 'info');
                    logResult('extraction-result', `æ£€æµ‹åˆ°å¹³å°: ${enhancedData.platform}`, 'info');

                } else {
                    logResult('extraction-result', 'âŒ æŠ“å–å¤±è´¥: æ— æ³•è§£æå†…å®¹', 'error');
                }

            } catch (error) {
                logResult('extraction-result', `âŒ æŠ“å–é”™è¯¯: ${error.message}`, 'error');
                console.error('Extraction error:', error);
            }
        }

        // æµ‹è¯•å¯è¯»æ€§æ£€æŸ¥
        function testReadability() {
            updateStatus('extraction-result', 'æµ‹è¯•å¯è¯»æ€§æ£€æŸ¥...', 'loading');

            const htmlContent = createJikeArticleHTML();
            const parser = new DOMParser();
            const doc = parser.parseFromString(htmlContent, 'text/html');

            // æµ‹è¯•ä¸åŒçš„å†…å®¹
            const tests = [
                { name: 'å®Œæ•´å³åˆ»æ–‡ç« ', doc: doc },
                { name: 'åªæœ‰æ ‡é¢˜çš„é¡µé¢', doc: createMinimalHTML() },
                { name: 'å¹¿å‘Šé¡µé¢', doc: createAdHTML() }
            ];

            tests.forEach(test => {
                const isReaderable = isProbablyReaderable(test.doc);
                logResult('extraction-result', `${test.name}: ${isReaderable ? 'âœ… å¯è¯»' : 'âŒ ä¸å¯è¯»'}`, isReaderable ? 'success' : 'error');
            });
        }

        // æµ‹è¯•å†…å®¹å¢å¼º
        function testContentEnhancement() {
            updateStatus('extraction-result', 'æµ‹è¯•å†…å®¹å¢å¼ºåŠŸèƒ½...', 'loading');

            const htmlContent = createJikeArticleHTML();
            const parser = new DOMParser();
            const doc = parser.parseFromString(htmlContent, 'text/html');

            const reader = new Readability(doc.cloneNode(true));
            const article = reader.parse();

            if (article) {
                const enhanced = simulateContentEnhancement(article);

                logResult('extraction-result', 'âœ… å†…å®¹å¢å¼ºæµ‹è¯•å®Œæˆ', 'success');
                logResult('extraction-result', `åŸå§‹å†…å®¹é•¿åº¦: ${article.length}`, 'info');
                logResult('extraction-result', `å¢å¼ºåæ•°æ®:`, 'info');
                logResult('extraction-result', `  - å¹³å°: ${enhanced.platform}`, 'info');
                logResult('extraction-result', `  - é˜…è¯»æ—¶é—´: ${enhanced.readingTime}åˆ†é’Ÿ`, 'info');
                logResult('extraction-result', `  - æ‘˜è¦: ${enhanced.excerpt.substring(0, 50)}...`, 'info');
                logResult('extraction-result', `  - å›¾ç‰‡æ•°é‡: ${enhanced.images.length}`, 'info');
                logResult('extraction-result', `  - é“¾æ¥æ•°é‡: ${enhanced.links.length}`, 'info');
            }
        }

        // æ¨¡æ‹Ÿå†…å®¹å¢å¼ºå¤„ç†
        function simulateContentEnhancement(article) {
            // è®¡ç®—é˜…è¯»æ—¶é—´ï¼ˆåŸºäºä¸­æ–‡é˜…è¯»é€Ÿåº¦300å­—/åˆ†é’Ÿï¼‰
            const readingTime = Math.ceil(article.length / 300);

            // æ£€æµ‹å¹³å°
            const platform = 'å³åˆ»';

            // ç”Ÿæˆæ‘˜è¦
            const excerpt = article.textContent.substring(0, 200) + '...';

            // æ¨¡æ‹Ÿæå–çš„å›¾ç‰‡å’Œé“¾æ¥
            const images = [
                { src: 'logo.png', alt: 'å³åˆ»App' },
                { src: 'topic.jpg', alt: 'è¿è¥çš„æ—¥å¸¸' }
            ];

            const links = [
                { url: 'https://web.okjike.com/originalPost/68bb80d614af706d82e43d01', text: 'åœ¨webç‰ˆæ‰“å¼€' },
                { url: 'https://www.reddit.com/r/SaaS/comments/1hn9d64/', text: 'Redditæ¡ˆä¾‹1' },
                { url: 'https://www.reddit.com/r/SaaS/comments/1ljtkzt/', text: 'Redditæ¡ˆä¾‹2' }
            ];

            return {
                ...article,
                platform,
                readingTime,
                excerpt,
                images,
                links,
                timestamp: new Date().toISOString(),
                extractionMethod: 'mozilla-readability-enhanced'
            };
        }

        // æ˜¾ç¤ºæ–‡ç« é¢„è§ˆ
        function displayArticlePreview(article) {
            const container = document.getElementById('extraction-result');
            const previewDiv = document.createElement('div');
            previewDiv.className = 'article-preview';
            previewDiv.innerHTML = `
                <div class="article-header">
                    <div class="article-title">${article.title || 'æ— æ ‡é¢˜'}</div>
                    <div class="article-meta">
                        ä½œè€…: ${article.byline || 'Niko_'} |
                        é•¿åº¦: ${article.length} å­—ç¬¦ |
                        è¯­è¨€: ${article.lang || 'zh-CN'}
                    </div>
                </div>
                <div class="article-content">
                    ${article.content.substring(0, 1000)}${article.content.length > 1000 ? '...' : ''}
                </div>
            `;
            container.appendChild(previewDiv);
        }

        // åˆ›å»ºæœ€å°HTMLç”¨äºæµ‹è¯•
        function createMinimalHTML() {
            const html = '<html><head><title>æµ‹è¯•</title></head><body><h1>åªæœ‰æ ‡é¢˜</h1></body></html>';
            return new DOMParser().parseFromString(html, 'text/html');
        }

        // åˆ›å»ºå¹¿å‘Šé¡µé¢ç”¨äºæµ‹è¯•
        function createAdHTML() {
            const html = `
                <html>
                <head><title>å¹¿å‘Šé¡µé¢</title></head>
                <body>
                    <div class="ad">å¹¿å‘Š1</div>
                    <div class="ad">å¹¿å‘Š2</div>
                    <div class="nav">å¯¼èˆª</div>
                    <div class="footer">é¡µè„š</div>
                </body>
                </html>
            `;
            return new DOMParser().parseFromString(html, 'text/html');
        }

        // é¡µé¢åŠ è½½æ—¶çš„æç¤º
        window.addEventListener('load', function() {
            logResult('extraction-result', 'ğŸ¯ çœŸå®æ–‡ç« æŠ“å–æµ‹è¯•å·²å‡†å¤‡å°±ç»ª', 'success');
            logResult('extraction-result', 'ç‚¹å‡»"æ¨¡æ‹Ÿæ–‡ç« æŠ“å–"å¼€å§‹æµ‹è¯•', 'info');
        });
    </script>
</body>
</html>
